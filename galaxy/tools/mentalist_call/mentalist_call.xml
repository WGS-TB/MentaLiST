<tool id="mentalist_call" name="MentaLiST MLST Analysis" version="0.2.1">
  <requirements>
    <requirement type="package" version="0.2.1">mentalist</requirement>
  </requirements>
  <edam_operations>
    <edam_operation>operation_3840</edam_operation>
  </edam_operations>
  <command detect_errors="exit_code"><![CDATA[
    mentalist
    call
    -o '$output_file'
    --db '$kmer_db.fields.path'
    #if $input_type.sPaired == "paired":
       -s $input_type.pInput1.name $input_type.pInput1 $input_type.pInput2
    #elif $input_type.sPaired == "collections":
       -s $input_type.fastq_collection.name $input_type.fastq_collection.forward $input_type.fastq_collection.reverse
    #end if
  ]]></command>
  <inputs>
    <conditional name="input_type">
      <param name="sPaired" type="select" label="Single Pair or Collection">
        <option value="collections">Paired-end Collections</option>
        <option value="paired">Paired-end</option>
      </param>
      <when value="paired">
        <param name="pInput1" type="data" format="fastq,fastqsanger,fastqillumina,fastqsolexa" label="Forward FASTQ file" help="Must have ASCII encoded quality scores"/>
        <param name="pInput2" type="data" format="fastq,fastqsanger,fastqillumina,fastqsolexa" label="Reverse FASTQ file" help="File format must match the Forward FASTQ file"/>
      </when>
      <when value="collections">
        <param name="fastq_collection" type="data_collection" label="Paired-end Fastq collection" help="" optional="false" format="txt" collection_type="paired" />
      </when>
    </conditional>
    <param name="kmer_db" type="select">
      <options from_data_table="mentalist_databases">
	<validator type="no_options" message="No MentaLiST databases are available" />
      </options>
    </param>
  </inputs>
  <outputs>
    <data name="output_file" format="tabular"/>
  </outputs>
  <help><![CDATA[
  ]]></help>
  <citations>
    <citation type="doi">10.1101/172858</citation>
    <citation type="doi">10.1099/mgen.0.000146</citation>
  </citations>
</tool>
